(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Goods"],{"004b":function(t,e,r){"use strict";var a=r("6f5c"),n=r.n(a);n.a},1276:function(t,e,r){"use strict";var a=r("d784"),n=r("44e7"),i=r("825a"),s=r("1d80"),o=r("4840"),l=r("8aa5"),c=r("50c4"),u=r("14c3"),d=r("9263"),m=r("d039"),p=[].push,f=Math.min,h=4294967295,g=!m((function(){return!RegExp(h,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(s(this)),i=void 0===r?h:r>>>0;if(0===i)return[];if(void 0===t)return[a];if(!n(t))return e.call(a,t,i);var o,l,c,u=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=new RegExp(t.source,m+"g");while(o=d.call(g,a)){if(l=g.lastIndex,l>f&&(u.push(a.slice(f,o.index)),o.length>1&&o.index<a.length&&p.apply(u,o.slice(1)),c=o[0].length,f=l,u.length>=i))break;g.lastIndex===o.index&&g.lastIndex++}return f===a.length?!c&&g.test("")||u.push(""):u.push(a.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var n=s(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n,r):a.call(String(n),e,r)},function(t,n){var s=r(a,t,this,n,a!==e);if(s.done)return s.value;var d=i(t),m=String(this),p=o(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),y=new p(g?d:"^(?:"+d.source+")",v),_=void 0===n?h:n>>>0;if(0===_)return[];if(0===m.length)return null===u(y,m)?[m]:[];var x=0,w=0,F=[];while(w<m.length){y.lastIndex=g?w:0;var k,C=u(y,g?m:m.slice(w));if(null===C||(k=f(c(y.lastIndex+(g?0:w)),m.length))===x)w=l(m,w,b);else{if(F.push(m.slice(x,w)),F.length===_)return F;for(var T=1;T<=C.length-1;T++)if(F.push(C[T]),F.length===_)return F;w=x=k}}return F.push(m.slice(x)),F}]}),!g)},"14c3":function(t,e,r){var a=r("c6b6"),n=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var i=r.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"159b":function(t,e,r){var a=r("da84"),n=r("fdbc"),i=r("17c2"),s=r("9112");for(var o in n){var l=a[o],c=l&&l.prototype;if(c&&c.forEach!==i)try{s(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,n=r("b301");t.exports=n("forEach")?function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"306f":function(t,e,r){},"3b0d":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("分类参数")])],1),r("el-card",[r("el-alert",{attrs:{title:"注意:只允许删除第三级分类设置相关参数!",type:"warning",closable:!1,"show-icon":""}}),r("el-row",{staticClass:"el-cascader"},[r("el-col",[r("span",[t._v("选择商品分类:")]),r("el-cascader",{attrs:{expandTrigger:"hover",options:t.paramsoptions,props:t.paramsCascader,clearable:""},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1),r("el-tabs",{on:{"tab-click":t.TabshandleClick},model:{value:t.TabsName,callback:function(e){t.TabsName=e},expression:"TabsName"}},[r("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[r("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isoptfor},on:{click:t.openDialog}},[t._v("添加参数")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.manyData}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(a,n){return r("el-tag",{key:n,attrs:{closable:""},on:{close:function(r){return t.restInputConfirm(n,e.row)}}},[t._v(t._s(a))])})),e.row.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(r){t.$set(e.row,"inputValue",r)},expression:"scope.row.inputValue"}}):r("el-button",{attrs:{size:"small"},on:{click:function(r){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.editopenDialog(e.row.attr_id)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){return t.deleteOpenDialog(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),r("el-tab-pane",{attrs:{label:"静态参数",name:"only"}},[r("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isoptfor},on:{click:t.openDialog}},[t._v("添加参数")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.onlyData}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(a,n){return r("el-tag",{key:n,attrs:{closable:""},on:{close:function(r){return t.restInputConfirm(n,e.row)}}},[t._v(t._s(a))])})),e.row.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(r){t.$set(e.row,"inputValue",r)},expression:"scope.row.inputValue"}}):r("el-button",{attrs:{size:"small"},on:{click:function(r){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.editopenDialog(e.row.attr_id)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){return t.deleteOpenDialog(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加"+t.titleText,visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.resetForm}},[r("el-form",{ref:"addForm1",attrs:{model:t.addForm,rules:t.addrulesForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[r("el-input",{model:{value:t.addForm.attr_name,callback:function(e){t.$set(t.addForm,"attr_name",e)},expression:"addForm.attr_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addsubmitForm}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改"+t.titleText,visible:t.dialogVisible2,width:"40%"},on:{"update:visible":function(e){t.dialogVisible2=e},close:t.resetForm2}},[r("el-form",{ref:"addForm2",attrs:{model:t.editForm,rules:t.editrulesForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[r("el-input",{model:{value:t.editForm.attr_name,callback:function(e){t.$set(t.editForm,"attr_name",e)},expression:"editForm.attr_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.editsubmitForm}},[t._v("确 定")])],1)],1)],1)},n=[],i=(r("99af"),r("4160"),r("a15b"),r("a434"),r("d3b7"),r("ac1f"),r("1276"),r("498a"),r("159b"),r("96cf"),{created:function(){this.getParamsList()},data:function(){return{paramsoptions:[],value:[],paramsCascader:{value:"cat_id",label:"cat_name",children:"children"},TabsName:"many",manyData:[],onlyData:[],dialogVisible:!1,dialogVisible2:!1,addForm:{attr_name:""},editForm:{attr_name:""},addrulesForm:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},editrulesForm:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]}}},computed:{isoptfor:function(){return 3!==this.value.length},cascaderId:function(){return 3!==this.value.length?null:this.value[2]},titleText:function(){return"many"!==this.TabsName?"静态参数":"动态参数"}},methods:{getParamsList:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$axios.get("categories",{params:{type:3}}));case 2:t=r.sent,e=t.data,200!==e.meta.status&&this.$notify.error({title:"获取商品分类失败",message:e.meta.msg,duration:2e3}),this.paramsoptions=e.data;case 6:case"end":return r.stop()}}),null,this)},gethandleChange:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return 3!==this.value.length&&(this.value=[]),r.next=3,regeneratorRuntime.awrap(this.$axios.get("categories/".concat(this.cascaderId,"/attributes"),{params:{sel:this.TabsName}}));case 3:t=r.sent,e=t.data,200!==e.meta.status?this.$notify.error({title:"错误",message:"请选择第三级商品，才能进行操作",duration:2e3}):(e.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(","):[],t.inputVisible=!1,t.inputValue=""})),"many"===this.TabsName?this.manyData=e.data:this.onlyData=e.data);case 6:case"end":return r.stop()}}),null,this)},handleChange:function(){3!==this.value.length&&(this.value=[],this.manyData=[],this.onlyData=[]),this.gethandleChange()},TabshandleClick:function(){this.gethandleChange(),this.addForm.attr_sel=this.TabsName},openDialog:function(){this.dialogVisible=!0},editopenDialog:function(t){var e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return this.dialogVisible2=!0,a.next=3,regeneratorRuntime.awrap(this.$axios.get("categories/".concat(this.cascaderId,"/attributes/").concat(t),{params:{attr_sel:this.TabsName}}));case 3:e=a.sent,r=e.data,this.editForm=r.data;case 6:case"end":return a.stop()}}),null,this)},resetForm:function(){this.$refs.addForm1.resetFields()},resetForm2:function(){this.$refs.addForm2.resetFields()},addsubmitForm:function(){var t=this;this.$refs.addForm1.validate((function(e){var r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,regeneratorRuntime.awrap(t.$axios.post("categories/".concat(t.cascaderId,"/attributes"),{attr_name:t.addForm.attr_name,attr_sel:t.TabsName}));case 4:r=n.sent,a=r.data,201!==a.meta.status?t.$notify.error({title:"添加失败",message:a.meta.msg,duration:2e3}):(t.gethandleChange(),t.dialogVisible=!1,t.$message.success(a.meta.msg));case 7:case"end":return n.stop()}}))}))},editsubmitForm:function(){var t=this;this.$refs.addForm2.validate((function(e){var r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,regeneratorRuntime.awrap(t.$axios.put("categories/".concat(t.cascaderId,"/attributes/").concat(t.editForm.attr_id),{attr_name:t.editForm.attr_name,attr_sel:t.TabsName}));case 4:r=n.sent,a=r.data,200!==a.meta.status?t.$notify.error({title:"更新失败",message:a.meta.msg,duration:2e3}):(t.$message.success(a.meta.msg),t.dialogVisible2=!1,t.gethandleChange());case 7:case"end":return n.stop()}}))}))},deleteOpenDialog:function(t){var e,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t})));case 2:if(e=n.sent,"confirm"!==e){n.next=12;break}return n.next=6,regeneratorRuntime.awrap(this.$axios.delete("categories/".concat(this.cascaderId,"/attributes/").concat(t)));case 6:r=n.sent,a=r.data,this.$message.success(a.meta.msg),this.gethandleChange(),n.next=13;break;case 12:this.$message.info("取消删除");case 13:case"end":return n.stop()}}),null,this)},setTagInputConfirm:function(t){var e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$axios.put("categories/".concat(this.cascaderId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(",")}));case 2:e=a.sent,r=e.data,200!==r.meta.status?this.$notify.error({title:"提交失败",message:r.meta.msg,duration:2e3}):this.$message.success(r.meta.msg);case 5:case"end":return a.stop()}}),null,this)},handleInputConfirm:function(t){0===t.inputValue.trim().length?(t.inputValue="",t.inputVisible=!1):(t.attr_vals.push(t.inputValue.trim()),t.inputValue="",t.inputVisible=!1,this.setTagInputConfirm(t))},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},restInputConfirm:function(t,e){e.attr_vals.splice(t,1),this.setTagInputConfirm(e)}}}),s=i,o=(r("004b"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"16030a68",null);e["default"]=l.exports},4160:function(t,e,r){"use strict";var a=r("23e7"),n=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"44e7":function(t,e,r){var a=r("861d"),n=r("c6b6"),i=r("b622"),s=i("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},"498a":function(t,e,r){"use strict";var a=r("23e7"),n=r("58a8").trim,i=r("e070");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),i="["+n+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(s,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:l(1),end:l(2),trim:l(3)}},6107:function(t,e,r){"use strict";var a=r("306f"),n=r.n(a);n.a},6547:function(t,e,r){var a=r("a691"),n=r("1d80"),i=function(t){return function(e,r){var i,s,o=String(n(e)),l=a(r),c=o.length;return l<0||l>=c?t?"":void 0:(i=o.charCodeAt(l),i<55296||i>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?t?o.charAt(l):i:t?o.slice(l,l+2):s-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},"691d":function(t,e,r){"use strict";var a=r("b49f"),n=r.n(a);n.a},"6f5c":function(t,e,r){},"8aa5":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},9263:function(t,e,r){"use strict";var a=r("ad6d"),n=RegExp.prototype.exec,i=String.prototype.replace,s=n,o=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=void 0!==/()??/.exec("")[1],c=o||l;c&&(s=function(t){var e,r,s,c,u=this;return l&&(r=new RegExp("^"+u.source+"$(?!\\s)",a.call(u))),o&&(e=u.lastIndex),s=n.call(u,t),o&&s&&(u.lastIndex=u.global?s.index+s[0].length:e),l&&s&&s.length>1&&i.call(s[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s}),t.exports=s},"96cf":function(t,e,r){var a=function(t){"use strict";var e,r=Object.prototype,a=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function l(t,e,r,a){var n=e&&e.prototype instanceof h?e:h,i=Object.create(n.prototype),s=new L(a||[]);return i._invoke=k(t,r,s),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(a){return{type:"throw",arg:a}}}t.wrap=l;var u="suspendedStart",d="suspendedYield",m="executing",p="completed",f={};function h(){}function g(){}function b(){}var v={};v[i]=function(){return this};var y=Object.getPrototypeOf,_=y&&y(y(R([])));_&&_!==r&&a.call(_,i)&&(v=_);var x=b.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function F(t){function e(r,n,i,s){var o=c(t[r],t,n);if("throw"!==o.type){var l=o.arg,u=l.value;return u&&"object"===typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,i,s)}),(function(t){e("throw",t,i,s)})):Promise.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return e("throw",t,i,s)}))}s(o.arg)}var r;function n(t,a){function n(){return new Promise((function(r,n){e(t,a,r,n)}))}return r=r?r.then(n,n):n()}this._invoke=n}function k(t,e,r){var a=u;return function(n,i){if(a===m)throw new Error("Generator is already running");if(a===p){if("throw"===n)throw i;return E()}r.method=n,r.arg=i;while(1){var s=r.delegate;if(s){var o=C(s,r);if(o){if(o===f)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===u)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var l=c(t,e,r);if("normal"===l.type){if(a=r.done?p:d,l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}function C(t,r){var a=t.iterator[r.method];if(a===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=c(a,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,f):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function R(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function r(){while(++n<t.length)if(a.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:E}}function E(){return{value:e,done:!0}}return g.prototype=x.constructor=b,b.constructor=g,b[o]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(F.prototype),F.prototype[s]=function(){return this},t.AsyncIterator=F,t.async=function(e,r,a,n){var i=new F(l(e,r,a,n));return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(x),x[o]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(a,n){return o.type="throw",o.arg=t,r.next=a,n&&(r.method="next",r.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),$(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;$(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,a){return this.delegate={iterator:R(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=a}catch(n){Function("r","regeneratorRuntime = r")(a)}},a15b:function(t,e,r){"use strict";var a=r("23e7"),n=r("44ad"),i=r("fc6a"),s=r("b301"),o=[].join,l=n!=Object,c=s("join",",");a({target:"Array",proto:!0,forced:l||c},{join:function(t){return o.call(i(this),void 0===t?",":t)}})},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),i=r("a691"),s=r("50c4"),o=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=Math.max,m=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u("splice")},{splice:function(t,e){var r,a,u,h,g,b,v=o(this),y=s(v.length),_=n(t,y),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=y-_):(r=x-2,a=m(d(i(e),0),y-_)),y+r-a>p)throw TypeError(f);for(u=l(v,a),h=0;h<a;h++)g=_+h,g in v&&c(u,h,v[g]);if(u.length=a,r<a){for(h=_;h<y-a;h++)g=h+a,b=h+r,g in v?v[b]=v[g]:delete v[b];for(h=y;h>y-a+r;h--)delete v[h-1]}else if(r>a)for(h=y-a;h>_;h--)g=h+a-1,b=h+r-1,g in v?v[b]=v[g]:delete v[b];for(h=0;h<r;h++)v[h+_]=arguments[h+2];return v.length=y-a+r,u}})},a5d5:function(t,e,r){},a870:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("商品列表")]),r("el-breadcrumb-item",[t._v("添加商品")])],1),r("el-card",[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}})],1),r("el-col",{attrs:{span:24}},[r("el-steps",{attrs:{active:t.activeIndex-0,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}}),r("el-step",{attrs:{title:"完成"}})],1)],1)],1),r("el-form",{ref:"ruleForm",attrs:{model:t.TbsruleForm,rules:t.rules,"label-position":"top"}},[r("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTable},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[r("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[r("el-cascader",{attrs:{"expand-trigger":"hover",options:t.cateoptions,props:t.cateProps,clearable:""},on:{change:t.parentCateChange},model:{value:t.TbsruleForm.goods_cat,callback:function(e){t.$set(t.TbsruleForm,"goods_cat",e)},expression:"TbsruleForm.goods_cat"}})],1),r("el-form-item",{attrs:{label:"商品名称-(不能为空/重复,否则创建失败)",prop:"goods_name"}},[r("el-input",{model:{value:t.TbsruleForm.goods_name,callback:function(e){t.$set(t.TbsruleForm,"goods_name",e)},expression:"TbsruleForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.TbsruleForm.goods_price,callback:function(e){t.$set(t.TbsruleForm,"goods_price",e)},expression:"TbsruleForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:t.TbsruleForm.goods_number,callback:function(e){t.$set(t.TbsruleForm,"goods_number",e)},expression:"TbsruleForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:t.TbsruleForm.goods_weight,callback:function(e){t.$set(t.TbsruleForm,"goods_weight",e)},expression:"TbsruleForm.goods_weight"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyTbsData,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-checkbox-group",{model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"value.attr_vals"}},t._l(e.attr_vals,(function(t,e){return r("el-checkbox",{key:e,attrs:{border:"",label:t}})})),1)],1)})),1),r("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyTbsData,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-input",{model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}})],1)})),1),r("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[r("el-upload",{staticStyle:{width:"500px"},attrs:{headers:t.headerObj,action:t.uploadURL,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"list-type":"picture",multiple:!0}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传图片")])],1)],1),r("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[r("quill-editor",{model:{value:t.TbsruleForm.goods_introduce,callback:function(e){t.$set(t.TbsruleForm,"goods_introduce",e)},expression:"TbsruleForm.goods_introduce"}}),r("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加商品")])],1)],1)],1)],1)],1)},n=[],i=(r("c740"),r("4160"),r("a15b"),r("a434"),r("d3b7"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("60bb")),s=r.n(i),o={created:function(){this.getclassification()},data:function(){return{activeIndex:"0",TbsruleForm:{goods_name:"",goods_price:0,goods_number:0,goods_weight:0,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},cateoptions:[],cateProps:{label:"cat_name",value:"cat_id",children:"children"},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_cat:[{required:!0,message:"请输选择第三级商品分类",trigger:"change"}]},manyTbsData:[],onlyTbsData:[],uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},picture:"",dialogVisible:!1}},computed:{cateID:function(){return 3===this.TbsruleForm.goods_cat.length?this.TbsruleForm.goods_cat[2]:null}},methods:{getclassification:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$axios.get("categories"));case 2:t=r.sent,e=t.data,200!==e.meta.status&&this.$message.error("获取失败"),this.cateoptions=e.data;case 6:case"end":return r.stop()}}),null,this)},parentCateChange:function(){3!==this.TbsruleForm.goods_cat.length&&(this.TbsruleForm.goods_cat=[])},beforeTable:function(t,e){if("0"===e&&3!==this.TbsruleForm.goods_cat.length)return this.$notify.warning({title:"提示",message:"请先选择商品分类,再进行后续操作"}),!1},tabClicked:function(){var t,e,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if("1"!==this.activeIndex){n.next=10;break}return n.next=3,regeneratorRuntime.awrap(this.$axios.get("categories/".concat(this.cateID,"/attributes"),{params:{sel:"many"}}));case 3:t=n.sent,e=t.data,200!==e.meta.status&&this.$message.error("商品参数获取失败"),e.data.forEach((function(t){t.attr_vals=0===t.attr_vals.length?[]:t.attr_vals.split(",")})),this.manyTbsData=e.data,n.next=17;break;case 10:if("2"!==this.activeIndex){n.next=17;break}return n.next=13,regeneratorRuntime.awrap(this.$axios.get("categories/".concat(this.cateID,"/attributes"),{params:{sel:"only"}}));case 13:r=n.sent,a=r.data,200!==a.meta.status&&this.$message.error("商品参数获取失败"),this.onlyTbsData=a.data;case 17:case"end":return n.stop()}}),null,this)},handlePreview:function(t){this.picture=t.response.data.url,this.dialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,r=this.TbsruleForm.pics.findIndex((function(t){return t.pic===e}));this.TbsruleForm.pics.splice(r,1)},handleSuccess:function(t){var e={pic:t.data.tmp_path};this.TbsruleForm.pics.push(e)},add:function(){var t=this;this.$refs.ruleForm.validate((function(e){var r,a,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return",t.$notify.error({title:"提示",message:"请完成基本信息的填写"}));case 2:return t.manyTbsData.forEach((function(e){var r={attr_id:e.attr_id,attr_value:e.attr_vals.join(",")};t.TbsruleForm.attrs.push(r)})),t.onlyTbsData.forEach((function(e){var r={attr_id:e.attr_id,attr_value:e.attr_vals};t.TbsruleForm.attrs.push(r)})),r=s.a.cloneDeep(t.TbsruleForm),r.goods_cat=r.goods_cat.join(","),i.next=8,regeneratorRuntime.awrap(t.$axios.post("goods",r));case 8:if(a=i.sent,n=a.data,201===n.meta.status){i.next=12;break}return i.abrupt("return",t.$notify.error({title:"错误",message:n.meta.msg}));case 12:t.$message.success(n.meta.msg),t.activeIndex="6";case 14:case"end":return i.stop()}}))}))}}},l=o,c=(r("6107"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"754f44bc",null);e["default"]=u.exports},ab25:function(t,e,r){"use strict";var a=r("a5d5"),n=r.n(a);n.a},ac1f:function(t,e,r){"use strict";var a=r("23e7"),n=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b301:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!r||!a((function(){r.call(null,e||function(){throw 1},1)}))}},b49f:function(t,e,r){},c740:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").findIndex,i=r("44d2"),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},cb38:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("订单管理")]),r("el-breadcrumb-item",[t._v("订单列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-form",{ref:"form",attrs:{model:t.searchform}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getGoodsList},model:{value:t.searchform.query,callback:function(e){t.$set(t.searchform,"query",e)},expression:"searchform.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.seachGoodsList},slot:"append"})],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary"},on:{click:t.goAddGoods}},[t._v("添加商品")])],1)],1),r("el-table",{staticStyle:{width:"100%",margin:"15px 0"},attrs:{data:t.goodsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"120px"}}),r("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"120px"}}),r("el-table-column",{attrs:{label:"创建时间",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.add_time)))]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return t.editGoodsList(e.row.goods_id)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return t.deleteGoodsList(e.row.goods_id)}}},[t._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":t.searchform.pagenum,"page-size":t.searchform.pagesize,"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"编辑商品",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.resetTbsName}},[r("el-form",{ref:"editGoods",attrs:{model:t.editGoodsForm,rules:t.editGoodsrules,"label-position":"top"}},[r("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"1"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:t.editGoodsForm.goods_name,callback:function(e){t.$set(t.editGoodsForm,"goods_name",e)},expression:"editGoodsForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.editGoodsForm.goods_price,callback:function(e){t.$set(t.editGoodsForm,"goods_price",e)},expression:"editGoodsForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:t.editGoodsForm.goods_number,callback:function(e){t.$set(t.editGoodsForm,"goods_number",e)},expression:"editGoodsForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:t.editGoodsForm.goods_weight,callback:function(e){t.$set(t.editGoodsForm,"goods_weight",e)},expression:"editGoodsForm.goods_weight"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品参数",name:"2"}},[t._l(t.editGoodsForm.attrs,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-input",{model:{value:e.attr_value,callback:function(r){t.$set(e,"attr_value",r)},expression:"item.attr_value"}})],1)})),0===t.editGoodsForm.attrs.length?r("span",[t._v("暂无参数")]):t._e()],2),r("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[r("el-upload",{attrs:{headers:t.headerObj,action:t.uploadURL,"on-success":t.uploadSuccess,"on-remove":t.handleRemove,"on-preview":t.handlePreview,"file-list":t.pics,"list-type":"picture",multiple:!0}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),r("el-tab-pane",{attrs:{label:"商品介绍",name:"4"}},[r("quill-editor",{staticStyle:{"min-height":"300px"},model:{value:t.editGoodsForm.goods_introduce,callback:function(e){t.$set(t.editGoodsForm,"goods_introduce",e)},expression:"editGoodsForm.goods_introduce"}}),r("div",{staticClass:"but"},[r("el-button",{attrs:{type:"primary"},on:{click:t.submitEditGoods}},[t._v("提交")])],1)],1)],1)],1)],1)],1)},n=[],i=(r("c740"),r("4160"),r("a434"),r("d3b7"),r("159b"),r("96cf"),{created:function(){this.getGoodsList()},data:function(){return{searchform:{query:"",pagenum:1,pagesize:10},goodsList:[],total:0,dialogVisible:!1,dialogVisible2:!1,activeName:"1",pics:[],picture:"",uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},editGoodsForm:{goods_name:"",goods_price:0,goods_number:0,goods_weight:0,attrs:[],pics:{},goods_introduce:""},editGoodsrules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"change"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"change"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"change"}]}}},methods:{getGoodsList:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$axios.get("goods",{params:this.searchform}));case 2:t=r.sent,e=t.data,200!==e.meta.status?this.$notify.error({title:"商品数据获取失败",message:e.meta.msg,duration:2e3}):(this.goodsList=e.data.goods,this.total=e.data.total);case 5:case"end":return r.stop()}}),null,this)},handleSizeChange:function(t){this.searchform.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.searchform.pagenum=t,this.getGoodsList()},seachGoodsList:function(){this.getGoodsList()},deleteGoodsList:function(t){var e,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t})));case 2:if(e=n.sent,"confirm"!==e){n.next=13;break}return n.next=6,regeneratorRuntime.awrap(this.$axios.delete("goods/".concat(t)));case 6:r=n.sent,a=r.data,200!==a.meta.status&&this.$message.info("删除失败"),this.getGoodsList(),this.$message.success(a.meta.msg),n.next=14;break;case 13:this.$message.info("取消删除");case 14:case"end":return n.stop()}}),null,this)},goAddGoods:function(){this.$router.push("/goods/add")},editGoodsList:function(t){var e,r,a=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.dialogVisible=!0,n.next=3,regeneratorRuntime.awrap(this.$axios.get("goods/".concat(t)));case 3:if(e=n.sent,r=e.data,200===r.meta.status){n.next=7;break}return n.abrupt("return",this.$message.error("商品数据获取失败"));case 7:this.$message.success(r.meta.msg),this.editGoodsForm=r.data,this.editGoodsForm.pics.forEach((function(t){var e={url:t.pics_big_url,tmp_url:t.pics_big};a.pics.push(e)}));case 10:case"end":return n.stop()}}),null,this)},resetTbsName:function(){this.activeName="1",this.pics=[]},uploadSuccess:function(t){var e={pic:t.data.tmp_path};this.editGoodsForm.pics.push(e)},handleRemove:function(t){var e=t.tmp_path,r=this.editGoodsForm.pics.findIndex((function(t){return t.pic===e}));this.editGoodsForm.pics.splice(r,1)},handlePreview:function(t){this.picture=t.response.data.url,this.dialogVisible2=!0},submitEditGoods:function(){var t=this;this.$refs.editGoods.validate((function(e){var r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",t.$message.error("验证未通过"));case 2:return n.next=4,regeneratorRuntime.awrap(t.$axios.put("goods/".concat(t.editGoodsForm.goods_id),t.editGoodsForm));case 4:if(r=n.sent,a=r.data,200===a.meta.status){n.next=8;break}return n.abrupt("return",t.$message.error("数据更新失败"));case 8:t.$message.success("商品数据更新成功"),t.getGoodsList(),t.dialogVisible=!1;case 11:case"end":return n.stop()}}))}))}}}),s=i,o=(r("ab25"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"efbbedd2",null);e["default"]=l.exports},d784:function(t,e,r){"use strict";var a=r("9112"),n=r("6eeb"),i=r("d039"),s=r("b622"),o=r("9263"),l=s("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,d){var m=s(t),p=!i((function(){var e={};return e[m]=function(){return 7},7!=""[t](e)})),f=p&&!i((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[m]=/./[m]),r.exec=function(){return e=!0,null},r[m](""),!e}));if(!p||!f||"replace"===t&&!c||"split"===t&&!u){var h=/./[m],g=r(m,""[t],(function(t,e,r,a,n){return e.exec===o?p&&!n?{done:!0,value:h.call(e,r,a)}:{done:!0,value:t.call(r,e,a)}:{done:!1}})),b=g[0],v=g[1];n(String.prototype,t,b),n(RegExp.prototype,m,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)}),d&&a(RegExp.prototype[m],"sham",!0)}}},e070:function(t,e,r){var a=r("d039"),n=r("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},fb9f:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("商品分类")])],1),r("el-card",[r("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:t.AddClassification}},[t._v("添加分类")]),r("tree-table",{attrs:{data:t.classifyList,columns:t.columns,"expand-type":!1,border:"","selection-type":!1,"show-index":!0},scopedSlots:t._u([{key:"isok",fn:function(t){return[!1===t.row.cat_deleted?r("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):r("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"tag",fn:function(e){return[0===e.row.cat_level?r("el-tag",[t._v("一级")]):t._e(),1===e.row.cat_level?r("el-tag",{attrs:{type:"success"}},[t._v("二级")]):t._e(),2===e.row.cat_level?r("el-tag",{attrs:{type:"warning"}},[t._v("三级")]):t._e()]}},{key:"but",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return t.editclassify(e.row.cat_id)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return t.deleteclassify(e.row.cat_id)}}},[t._v("删除")])]}}])}),r("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-size":t.queryInfo.pagesize,"page-sizes":[1,3,5,10],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加分类",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.resetForm}},[r("el-form",{ref:"ClassificationForm1",attrs:{model:t.ClassificationForm,rules:t.ClassificationRules}},[r("el-form-item",{attrs:{label:"分类名称:","label-width":"90px",prop:"cat_name"}},[r("el-input",{model:{value:t.ClassificationForm.cat_name,callback:function(e){t.$set(t.ClassificationForm,"cat_name",e)},expression:"ClassificationForm.cat_name"}})],1),r("el-form-item",{attrs:{label:"父级分类:","label-width":"90px"}},[r("el-cascader",{attrs:{"expand-trigger":"hover",options:t.parentCateList,props:t.cascaderProps,clearable:"","change-on-select":""},on:{change:t.parentCateChange},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addForm}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑分类",visible:t.dialogVisible2,width:"40%"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[r("el-form",{ref:"editruleForm",attrs:{model:t.editruleForm,rules:t.editrules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[r("el-input",{model:{value:t.editruleForm.cat_name,callback:function(e){t.$set(t.editruleForm,"cat_name",e)},expression:"editruleForm.cat_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.submitEdit}},[t._v("确 定")])],1)],1)],1)},n=[],i=(r("d3b7"),r("96cf"),{created:function(){this.getlaCssifyList()},data:function(){return{classifyList:[],queryInfo:{type:3,pagenum:1,pagesize:10},total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"tag"},{label:"操作",type:"template",template:"but"}],dialogVisible:!1,dialogVisible2:!1,ClassificationForm:{cat_name:"",cat_pid:0,cat_level:0},editruleForm:{cat_name:""},ClassificationRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},editrules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},selectedKeys:[],parentCateList:[],cascaderProps:{value:"cat_id",label:"cat_name",children:"children"}}},methods:{getlaCssifyList:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$axios.get("categories",{params:this.queryInfo}));case 2:t=r.sent,e=t.data,this.classifyList=e.data.result,this.total=e.data.total;case 6:case"end":return r.stop()}}),null,this)},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getlaCssifyList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getlaCssifyList()},AddClassification:function(){this.dialogVisible=!0,this.getCategoriesList()},getCategoriesList:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$axios.get("categories",{params:{type:2}}));case 2:t=r.sent,e=t.data,this.parentCateList=e.data;case 5:case"end":return r.stop()}}),null,this)},parentCateChange:function(){this.selectedKeys.length>0?(this.ClassificationForm.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.ClassificationForm.cat_level=this.selectedKeys.length):(this.ClassificationForm.cat_pid=0,this.ClassificationForm.cat_level=0)},addForm:function(){var t=this;this.$refs.ClassificationForm1.validate((function(e){var r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,regeneratorRuntime.awrap(t.$axios.post("categories",t.ClassificationForm));case 4:r=n.sent,a=r.data,201!==a.meta.status?t.$notify.error({title:"添加父类失败",message:a.meta.msg,duration:2e3}):(t.$message.success(a.meta.msg),t.getlaCssifyList(),t.dialogVisible=!1);case 7:case"end":return n.stop()}}))}))},resetForm:function(){this.$refs.ClassificationForm1.resetFields(),this.selectedKeys=[],this.ClassificationForm.cat_pid=0,this.ClassificationForm.cat_level=0},deleteclassify:function(t){var e,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t})));case 2:if(e=n.sent,"confirm"===e){n.next=5;break}return n.abrupt("return",this.$message.info("取消了删除"));case 5:return n.next=7,regeneratorRuntime.awrap(this.$axios.delete("categories/".concat(t)));case 7:if(r=n.sent,a=r.data,200===a.meta.status){n.next=11;break}return n.abrupt("return",this.$message.error("删除操作失败"));case 11:this.$message.success("删除成功"),this.getlaCssifyList();case 13:case"end":return n.stop()}}),null,this)},editclassify:function(t){var e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return this.dialogVisible2=!0,a.next=3,regeneratorRuntime.awrap(this.$axios.get("categories/".concat(t)));case 3:e=a.sent,r=e.data,this.editruleForm=r.data;case 6:case"end":return a.stop()}}),null,this)},submitEdit:function(){var t=this;this.$refs.editruleForm.validate((function(e){var r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",t.$message.error("验证未通过"));case 2:return n.next=4,regeneratorRuntime.awrap(t.$axios.put("categories/".concat(t.editruleForm.cat_id),{cat_name:t.editruleForm.cat_name}));case 4:r=n.sent,a=r.data,t.$message.success(a.meta.msg),t.getlaCssifyList(),t.dialogVisible2=!1;case 9:case"end":return n.stop()}}))}))}}}),s=i,o=(r("691d"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"73c3d500",null);e["default"]=l.exports},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=Goods.461a2a73.js.map